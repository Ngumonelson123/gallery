(()=>{var e={656:(e,t,s)=>{const o=s(37);var r=new(0,o.Schema)({name:String,path:String,size:Number,date:{type:Date,default:Date()}});let i=o.model("Image",r);e.exports=i},393:(e,t,s)=>{const o=s(252).Router();let r=s(656);o.get("/:id",((e,t)=>{r.findById(e.params.id,(function(e,s){e&&console.log(e),t.render("singleImage",{title:"Single Image",image:s})}))})),o.put("/:id",((e,t)=>{console.log(e.params.id),console.log(e.body),r.findOneAndUpdate({_id:e.params.id},{name:e.body.name},{new:!0},(function(e,s){e&&console.log(e),t.redirect("/")}))})),o.delete("/:id",((e,t)=>{console.log(e.params.id),r.deleteOne({_id:e.params.id},(function(e){e&&console.log(e),t.redirect("/index")}))})),e.exports=o},4:(e,t,s)=>{const o=s(252).Router();s(903);let r=s(79);s(16);let i=s(656);o.get("/",((e,t)=>{i.find({},(function(s,o){s&&console.log(s),t.render("index",{images:o,msg:e.query.msg})}))})),o.post("/upload",((e,t)=>{r(e,t,(s=>{s?t.redirect(`/?msg=${s}`):(console.log(e.file),null==e.file?t.redirect("/?msg=Error: No file selcted!"):(new i({name:e.file.filename,size:e.file.size,path:"images/"+e.file.filename}).save(),t.redirect("/?msg=File uploaded successfully")))}))})),e.exports=o},79:(e,t,s)=>{const o=s(461),r=s(928),i=o.diskStorage({destination:"./public/images/",filename:function(e,t,s){s(null,t.fieldname+"-"+Date.now()+r.extname(t.originalname))}}),n=o({storage:i,limits:{fileSize:1e6},fileFilter:function(e,t,s){!function(e,t){const s=/jpeg|jpg|png|gif/,o=s.test(r.extname(e.originalname).toLowerCase());if(s.test(e.mimetype)&&o)return t(null,!0);t("Error: Images Only!!")}(t,s)}}).single("image");e.exports=n},578:(e,t,s)=>{const o=s(252),r=(s(268),s(37)),i=s(928);let n=s(4),l=s(393);r.connect("mongodb+srv://nelsonmbui88:CdL9MxmwCbrTeEEj@devopscluster.kfxuj.mongodb.net/?retryWrites=true&w=majority&appName=DevopsClusterdarkroom",{useNewUrlParser:!0,useUnifiedTopology:!0},(e=>{e&&console.log(e)})),r.connection.once("open",(()=>{console.log("Database connected successfully")}));const a=o();a.set("view engine","ejs"),a.use(o.static(i.join(__dirname,"public"))),a.use(o.json()),a.use("/",n),a.use("/image",l);const c=process.env.PORT||5e3;a.listen(c,(()=>{console.log(`Server is listening at http://192.168.3.114:${c}`)})),e.exports=a},268:e=>{"use strict";e.exports=require("body-parser")},252:e=>{"use strict";e.exports=require("express")},37:e=>{"use strict";e.exports=require("mongoose")},461:e=>{"use strict";e.exports=require("multer")},903:e=>{"use strict";e.exports=require("uuid")},928:e=>{"use strict";e.exports=require("path")},16:e=>{"use strict";e.exports=require("url")}},t={};!function s(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,s),i.exports}(578)})();